(function(g){function L(){var a=[];this.empty=function(){for(var c=0;c<a.length;c++)if(a[c])return!1;return!0};this.add=function(c){a.push(c)};this.addNext=function(c){var d=[],f,e=0;for(f=0;f<a.length;f++)a[f]&&(1==e&&d.push(c),d.push(a[f]),e++);2>e&&d.push(c);a=d};this.get=function(){for(var c=0;c<a.length;c++)if(a[c])return a[c];return!1};this.ack=function(){for(var c=0;c<a.length;c++)if(a[c]){delete a[c];break}this.empty()&&(a=[])}}function M(){var a={};this.add=function(c,d,f){c=c.toLowerCase();
a[c]||(a[c]=[]);a[c].push({obj:d,tag:h(f,"tag")});return c+"-"+(a[c].length-1)};this.get=function(c,d,f){var e,n,c=c.toLowerCase();if(!a[c]||!a[c].length)return null;e=d?a[c].length:-1;n=d?-1:1;for(d=0;d<a[c].length;d++)if(e+=n,a[c][e]&&!(void 0!==f&&(void 0===a[c][e].tag||0>g.inArray(a[c][e].tag,f))))return a[c][e].obj;return null};this.all=function(c,d){var f,e=[],c=c.toLowerCase();if(!a[c]||!a[c].length)return e;for(f=0;f<a[c].length;f++)a[c][f]&&(void 0!==d&&(void 0===a[c][f].tag||0>g.inArray(a[c][f].tag,
d))||e.push(a[c][f].obj));return e};this.names=function(){var c,d=[];for(c in a)d.push(c);return d};this.refToObj=function(c){c=c.split("-");return 2==c.length&&a[c[0]]&&a[c[0]][c[1]]?a[c[0]][c[1]].obj:null};this.rm=function(c,d,f){var e,c=c.toLowerCase();if(!a[c])return!1;if(void 0!==d)if(f)for(e=a[c].length-1;0<=e&&!(void 0!==a[c][e]&&void 0!==a[c][e].tag&&0<=g.inArray(a[c][e].tag,d));e--);else for(e=0;e<a[c].length&&!(void 0!==a[c][e]&&void 0!==a[c][e].tag&&0<=g.inArray(a[c][e].tag,d));e++);else e=
f?a[c].length-1:0;if(!(e in a[c]))return!1;"function"===typeof a[c][e].obj.setMap&&a[c][e].obj.setMap(null);"function"===typeof a[c][e].obj.remove&&a[c][e].obj.remove();"function"===typeof a[c][e].obj.free&&a[c][e].obj.free();delete a[c][e].obj;if(void 0!==d){f=[];for(d=0;d<a[c].length;d++)d!==e&&f.push(a[c][d]);a[c]=f}else f?a[c].pop():a[c].shift();return!0};this.clear=function(c,d,f,e){var g,b;if(!c||!c.length)for(g in c=[],a)c.push(g);else c=t(c);for(g=0;g<c.length;g++)if(c[g]&&(b=c[g].toLowerCase(),
a[b]))if(d)this.rm(b,e,!0);else if(f)this.rm(b,e,!1);else for(;this.rm(b,e,!1););}}function N(){var a=[],c=[],d=[],f=[],e=!1,h;this.events=function(){for(var b=0;b<arguments.length;b++)c.push(arguments[b])};this.startRedraw=function(){return!e?e=!0:!1};this.endRedraw=function(){e=!1};this.redraw=function(){var b,q=[],a=this;for(b=0;b<arguments.length;b++)q.push(arguments[b]);this.startRedraw?(h.apply(a,q),this.endRedraw()):setTimeout(function(){a.redraw.apply(a,q)},50)};this.setRedraw=function(b){h=
b};this.store=function(b,q,a){d.push({data:b,obj:q,shadow:a})};this.free=function(){for(var b=0;b<c.length;b++)google.maps.event.removeListener(c[b]);c=[];this.freeAll()};this.freeIndex=function(b){"function"===typeof d[b].obj.setMap&&d[b].obj.setMap(null);"function"===typeof d[b].obj.remove&&d[b].obj.remove();d[b].shadow&&("function"===typeof d[b].shadow.remove&&d[b].obj.remove(),"function"===typeof d[b].shadow.setMap&&d[b].shadow.setMap(null),delete d[b].shadow);delete d[b].obj;delete d[b].data;
delete d[b]};this.freeAll=function(){var b;for(b=0;b<d.length;b++)d[b]&&this.freeIndex(b);d=[]};this.freeDiff=function(b){var q,a={},c=[];for(q=0;q<b.length;q++)c.push(b[q].idx.join("-"));for(q=0;q<d.length;q++)d[q]&&(b=g.inArray(d[q].data.idx.join("-"),c),0<=b?a[b]=!0:this.freeIndex(q));return a};this.add=function(b,q){a.push({latLng:b,marker:q})};this.get=function(b){return a[b]};this.clusters=function(b,q,c,d){var e=b.getProjection(),w=e.fromLatLngToPoint(new google.maps.LatLng(b.getBounds().getNorthEast().lat(),
b.getBounds().getSouthWest().lng())),i,j,g,h,l,m=b.getZoom(),n={},r={},p={},s=[],t;t=b.getBounds();c=c&&c<=b.getZoom();l=2<b.getZoom();j=0;b={};for(i=0;i<a.length;i++)if(!l||t.contains(a[i].latLng))h=e.fromLatLngToPoint(a[i].latLng),n[i]=[Math.floor((h.x-w.x)*Math.pow(2,m)),Math.floor((h.y-w.y)*Math.pow(2,m))],b[i]=!0,j++;if(!d&&!c){for(d=0;d<f.length;d++)if(d in b)j--;else break;if(!j)return!1}f=b;b=[];for(i in n)d=n[i][0],h=n[i][1],d in r||(r[d]={}),h in r[d]||(r[d][h]=i,p[i]={},b.push(i)),p[r[d][h]][i]=
!0;q=Math.pow(q,2);delete r;for(d=0;;){for(;d<b.length&&!(b[d]in p);)d++;if(d==b.length)break;i=b[d];t=n[i][0];h=n[i][1];r=null;if(c)r={lat:t,lng:h,idx:[i]};else{do{i={lat:0,lng:0,idx:[]};for(l=d;l<b.length;l++)if(b[l]in p&&(j=b[l],Math.pow(t-n[j][0],2)+Math.pow(h-n[j][1],2)<=q))for(g in p[j])i.lat+=a[g].latLng.lat(),i.lng+=a[g].latLng.lng(),i.idx.push(g);i.lat/=i.idx.length;i.lng/=i.idx.length;r?(j=i.idx.length>r.idx.length)&&(r=i):(j=1<i.idx.length,r=i);j&&(h=e.fromLatLngToPoint(new google.maps.LatLng(r.lat,
r.lng)),t=Math.floor((h.x-w.x)*Math.pow(2,m)),h=Math.floor((h.y-w.y)*Math.pow(2,m)))}while(j)}for(l=0;l<r.idx.length;l++)r.idx[l]in p&&delete p[r.idx[l]];s.push(r)}return s};this.getBounds=function(){var b,q=new google.maps.LatLngBounds;for(b=0;b<a.length;b++)q.extend(a[b].latLng);return q}}function E(a){for(var c in a)l[c]="object"===typeof l[c]?g.extend({},l[c],a[c]):a[c]}function z(a,c){if(c.toLowerCase){var c=c.toLowerCase(),d;for(d in a)if(d.toLowerCase&&d.toLowerCase()==c)return d}return!1}
function h(a,c,d){return(c=z(a,c))?a[c]:d}function x(a,c){var d,f;if(!a||!c)return!1;c=t(c);for(d in a)if(d.toLowerCase)for(f in d=d.toLowerCase(),c)if(d==c[f])return!0;return!1}function F(a,c,d){if(x(a,v)||x(a,c)){var f,e;for(f=0;f<v.length;f++)e=z(a,v[f]),d[v[f]]=e?a[e]:{};if(c&&c.length)for(f=0;f<c.length;f++)if(e=z(a,c[f]))d[c[f]]=a[e]}else for(e in d.opciones={},a)"accion"!==e&&(d.opciones[e]=a[e]);return d}function s(a,c,d,f){var e=z(c,a),a={},g=["map"];a.callback=h(c,"callback");d=t(d);f=t(f);
if(e)return F(c[e],d,a);if(f&&f.length)for(e=0;e<f.length;e++)g.push(f[e]);x(c,g)||(a=F(c,d,a));for(e=0;e<v.length;e++)v[e]in a||(a[v[e]]={});return a}function G(){B||(B=new google.maps.Geocoder);return B}function H(){elevationService||(elevationService=new google.maps.ElevationService);return elevationService}function C(a){return("number"===typeof a||"string"===typeof a)&&""!==a&&!isNaN(a)}function t(a){var c,d=[];if(void 0!==a)if("object"===typeof a)if("number"===typeof a.length)d=a;else for(c in a)d.push(a[c]);
else d.push(a);return d}function p(a,c,d){c=c?a:null;return!a||"string"===typeof a?c:a.latLng?p(a.latLng):"function"===typeof a.lat?a:C(a.lat)?new google.maps.LatLng(a.lat,a.lng):!d&&a.length?!C(a[0])||!C(a[1])?c:new google.maps.LatLng(a[0],a[1]):c}function I(a,c,d){var f,e;if(!a)return null;c=d?a:null;if("function"===typeof a.getCenter)return a;a.length?2==a.length?(f=p(a[0]),e=p(a[1])):4==a.length&&(f=p([a[0],a[1]]),e=p([a[2],a[3]])):"ne"in a&&"sw"in a?(f=p(a.ne),e=p(a.sw)):"n"in a&&("e"in a&&"s"in
a&&"w"in a)&&(f=p([a.n,a.e]),e=p([a.s,a.w]));return f&&e?new google.maps.LatLngBounds(e,f):c}function O(a){var c=new L,d=new M,f=null,e={},n=!1;this._plan=function(b){for(var q=0;q<b.length;q++)c.add(b[q]);this._run()};this._planNext=function(b){c.addNext(b)};this._direct=function(b){var q=h(b,"accion"),a={},c=b;q in l&&(a=l[q]);b.args&&(c=b.args);aux=g.extend({},a,c);return this[q](aux)};this._end=function(){n=!1;c.ack();this._run()};this._run=function(){if(!n){var b=c.get();b&&(n=!0,this._proceed(b))}};
this._proceed=function(b){var b=b||{},a=h(b,"accion")||"init",c=a.toLowerCase(),d=!0,e=h(b,"target"),w=h(b,"args"),i,j={agregarMarcador:"addMarker",agregarMarcadores:"addMarkers",agregarRectangulo:"addRectangle",agregarCapaKml:"addKmlLayer",limpiar:"clear"};j[a]&&(a=j[a],c=a.toLowerCase());if(j=!f)a:{if(c)for(j=0;j<J.length;j++)if(J[j]===c){j=!1;break a}j=!0}j&&this.init(g.extend({},l.init,b.args&&b.args.map?b.args.map:b.map?b.map:{}),!0);if(!e&&!w&&c in this&&"function"===typeof this[c])this[c](g.extend({},
c in l?l[c]:{},b.args?b.args:b));else{if(e&&"object"===typeof e){if(d="function"===typeof e[a])i=e[a].apply(e,b.args?b.args:[])}else if(f&&(d="function"===typeof f[a]))i=f[a].apply(f,b.args?b.args:[]);!d&&l.verbose&&alert("Acci\u00f3n desconocida : "+a);this._callback(i,b);this._end()}};this._resolveLatLng=function(b,a,c,d){var f=h(b,"direccion"),e=this,i="function"===typeof a?a:e[a];f?(d||(d=0),f="object"===typeof f?f:{address:f},G().geocode(f,function(f,u){u===google.maps.GeocoderStatus.OK?i.apply(e,
[b,c?f:f[0].geometry.location]):u===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&d<l.queryLimit.attempt?setTimeout(function(){e._resolveLatLng(b,a,c,d+1)},l.queryLimit.delay+Math.floor(Math.random()*l.queryLimit.random)):(l.verbose&&alert("Geocode error : "+u),i.apply(e,[b,!1]))})):i.apply(e,[b,p(b,!1,!0)])};this._resolveAllLatLng=function(b,a,c){var d=this,f=-1,e=function(){do f++;while(f<b[a].length&&!("direccion"in b[a][f]));if(f<b[a].length)d._resolveLatLng(b[a][f],function(b,a){b.latLng=a;e.apply(d,
[])});else d[c](b)};e()};this._call=function(){var b,a=arguments[0],c=[];if(arguments.length&&f&&"function"===typeof f[a]){for(b=1;b<arguments.length;b++)c.push(arguments[b]);return f[a].apply(f,c)}};this._subcall=function(b,a){var c={};b.map&&(a||(a=h(b.map,"latlng")),f?(b.map.center&&a&&this._call("setCenter",a),void 0!==b.map.zoom&&this._call("setZoom",b.map.zoom),void 0!==b.map.mapTypeId&&this._call("setMapTypeId",b.map.mapTypeId)):(a&&(c={center:a}),this.init(g.extend({},b.map,c),!0)))};this._attachEvent=
function(b,c,d,f,e){google.maps.event["addListener"+(e?"Once":"")](b,c,function(c){d.apply(a,[b,c,f])})};this._attachEvents=function(b,a){var c;if(a){if(a.events)for(c in a.events)"function"===typeof a.events[c]&&this._attachEvent(b,c,a.events[c],a.data,!1);if(a.onces)for(c in a.onces)"function"===typeof a.onces[c]&&this._attachEvent(b,c,a.onces[c],a.data,!0)}};this._callback=function(b,c){if("function"===typeof c.callback)c.callback.apply(a,[b]);else if("object"===typeof c.callback)for(var d=0;d<
c.callback.length;d++)"function"===typeof c.callback[d]&&c.callback[k].apply(a,[b])};this._manageEnd=function(b,a,c){var d,f;if(b&&"object"===typeof b&&(this._attachEvents(b,a),a.apply&&a.apply.length))for(d=0;d<a.apply.length;d++)if(f=a.apply[d],f.action&&"function"===typeof b[f.action])if(f.args)b[f.action].apply(b,f.args);else b[f.action]();c||(this._callback(b,a),this._end())};this.destroy=function(b){var c;d.clear();a.empty();for(c in e)delete e[c];e={};f&&delete f;this._callback(null,b);this._end()};
this.init=function(b,c){var d,A,u;if(f)return this._end();d=s("map",b);if("boolean"===typeof d.opciones.center&&d.opciones.center)return!1;u=g.extend({},l.init,d.opciones);u.center||(u.center=[l.init.center.lat,l.init.center.lng]);u.center=p(u.center);u.streetViewControl=!1;u.scaleControl=!0;var h=m._prepararContenedor(a);f=new l.classes.Map(h,u);a.data("gmap",f);google.maps.event.addListener(f,"maptypeid_changed",function(){f.setZoom(f.getZoom()+1);f.setZoom(f.getZoom()-1)});m.GmapAgregarCapaBase(f,
new m.CapaBaseIGN);m.GmapAgregarCapaWms(f,new m.CapaWMSIGN);for(A in e)f.mapTypes.set(A,e[A]);this._manageEnd(f,d,c);return!0};this.getlatlng=function(b){this._resolveLatLng(b,"_getLatLng",!0)};this._getLatLng=function(b,a){this._manageEnd(a,b)};this.getaddress=function(b,c){var d=p(b,!1,!0),f=h(b,"direccion"),d=d?{latLng:d}:f?"string"===typeof f?{address:f}:f:null,e=h(b,"callback"),g=this;c||(c=0);d&&"function"===typeof e?G().geocode(d,function(d,f){if(f===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&
c<l.queryLimit.attempt)setTimeout(function(){g.getaddress(b,c+1)},l.queryLimit.delay+Math.floor(Math.random()*l.queryLimit.random));else{var D=f===google.maps.GeocoderStatus.OK?d:!1;e.apply(a,[D,f]);!D&&l.verbose&&alert("Geocode error : "+f);g._end()}}):this._end()};this.getroute=function(b){var c=h(b,"callback"),d=this;"function"===typeof c&&b.opciones?(b.opciones.origin=p(b.opciones.origin,!0),b.opciones.destination=p(b.opciones.destination,!0),directionsService||(directionsService=new google.maps.DirectionsService),
directionsService.route(b.opciones,function(b,f){c.apply(a,[f==google.maps.DirectionsStatus.OK?b:!1,f]);d._end()})):this._end()};this.getelevation=function(b){var c,d,f,e=[],g=h(b,"callback");d=h(b,"latlng");var i=this;if("function"===typeof g){c=function(b,c){g.apply(a,[c===google.maps.ElevationStatus.OK?b:!1,c]);i._end()};if(d)e.push(p(d));else{e=h(b,"locations")||[];e=t(e);for(f=0;f<e.length;f++)e[f]=p(e[f])}if(e.length)H().getElevationForLocations({locations:e},c);else if(d=h(b,"path"),b=h(b,
"samples"),d&&b){for(f=0;f<d.length;f++)e.push(p(d[f]));e.length&&H().getElevationAlongPath({path:e,samples:b},c)}}else this._end()};this.getdistance=function(b){var c,d=h(b,"callback"),f=this;if("function"===typeof d&&b.opciones&&b.opciones.origins&&b.opciones.destinations){b.opciones.origins=t(b.opciones.origins);for(c=0;c<b.opciones.origins.length;c++)b.opciones.origins[c]=p(b.opciones.origins[c],!0);b.opciones.destinations=t(b.opciones.destinations);for(c=0;c<b.opciones.destinations.length;c++)b.opciones.destinations[c]=
p(b.opciones.destinations[c],!0);distanceMatrixService||(distanceMatrixService=new google.maps.DistanceMatrixService);distanceMatrixService.getDistanceMatrix(b.opciones,function(b,c){d.apply(a,[c==google.maps.DistanceMatrixStatus.OK?b:!1,c]);f._end()})}else this._end()};this.addmarker=function(b){this._resolveLatLng(b,"_addMarker")};this._addMarker=function(b,a,c){var e,g,h=s("marker",b,"to");h.opciones.icon||(h.opciones.icon=m.BASEURL+"img/marcadores/punto.png");if(c){if(!a)return}else{if(!a){this._manageEnd(!1,
h);return}this._subcall(b,a)}if(h.to){if(e=(g=d.refToObj(h.to))&&"function"===typeof g.add)g.add(a,b),"function"===typeof g.redraw&&g.redraw();c||this._manageEnd(e,h)}else{h.opciones.position=a;h.opciones.map=f;e=new l.classes.Marker(h.opciones);if(x(b,"infowindow")){b=s("infowindow",b.infowindow,"open");if(void 0===b.open||b.open)b.apply=t(b.apply),b.apply.unshift({action:"open",args:[f,e]});b.action="addinfowindow";this._planNext(b)}c||(d.add("marker",e,h),this._manageEnd(e,h))}return e};this.addmarkers=
function(b){h(b,"clusters")?this._resolveAllLatLng(b,"markers","_addclusteredmarkers"):this._resolveAllLatLng(b,"markers","_addmarkers")};this._addmarkers=function(b){var a,c,e,u,n={},i,j=h(b,"markers");this._subcall(b);if("object"!==typeof j)return this._end();c=s("marker",b,["to","markers"]);c.opciones.icon||(c.opciones.icon=m.BASEURL+"img/marcadores/punto.png");if(c.to){if(a=(b=d.refToObj(c.to))&&"function"===typeof b.add){for(e=0;e<j.length;e++)(u=p(j[e]))&&b.add(u,j[e]);"function"===typeof b.redraw&&
b.redraw()}this._manageEnd(a,c)}else{g.extend(!0,n,c.opciones);n.map=f;a=[];for(e=0;e<j.length;e++)if(u=p(j[e]))j[e].opciones?(i={},g.extend(!0,i,n,j[e].opciones),c.opciones=i):c.opciones=n,c.opciones.position=u,u=new l.classes.Marker(c.opciones),a.push(u),c.data=j[e].data,c.tag=j[e].tag,d.add("marker",u,c),this._manageEnd(u,c,!0);c.opciones=n;this._callback(a,b);this._end()}};this._addclusteredmarkers=function(b){var a,c,d,e=this,g=h(b,"radius"),i=h(b,"maxZoom"),j=h(b,"markers"),l=h(b,"clusters");
if(f.getBounds()){if("number"===typeof g){a=new N;for(c=0;c<j.length;c++)d=p(j[c]),a.add(d,j[c]);a=this._initClusters(b,a,g,i,l)}this._callback(a,b);this._end()}else google.maps.event.addListenerOnce(f,"bounds_changed",function(){e._addclusteredmarkers(b)})};this._initClusters=function(b,a,c,e,g){var h=this;a.setRedraw(function(d){var j=a.clusters(f,c,e,d);j&&(d=a.freeDiff(j),h._displayClusters(b,a,j,d,g))});a.events(google.maps.event.addListener(f,"zoom_changed",function(){a.redraw(!0)}),google.maps.event.addListener(f,
"bounds_changed",function(){a.redraw()}));a.redraw();return d.add("cluster",a,b)};this._displayClusters=function(b,a,c,d,f){for(var e,i,j,l,n,m,t,v=x(b,"cluster")?s("",h(b,"cluster")):{},r=x(b,"marker")?s("",h(b,"marker")):{},b=0;b<c.length;b++)if(!(b in d)){n=c[b];i=!1;if(1<n.idx.length){j=0;for(e in f)e>j&&e<=n.idx.length&&(j=e);if(f[j]){i=h(f[j],"width");l=h(f[j],"height");t=h(f[j],"offset")||[-i/2,-l/2];m={};g.extend(!0,m,v,{opciones:{pane:"overlayLayer",content:f[j].content.replace("CLUSTER_COUNT",
n.idx.length),offset:{x:t[0],y:t[1]}}});j=this._addOverlay(m,p(n),!0);m.opciones.pane="floatShadow";m.opciones.content=g("<div></div>");m.opciones.content.width(i);m.opciones.content.height(l);l=this._addOverlay(m,p(n),!0);v.data={latLng:p(n),markers:[]};for(i=0;i<n.idx.length;i++)v.data.markers.push(a.get(n.idx[i]).marker);this._attachEvents(l,v);a.store(n,j,l);i=!0}}if(!i){l={};g.extend(!0,l,r.opciones);for(i=0;i<n.idx.length;i++)j=a.get(n.idx[i]),r.latLng=j.latLng,r.data=j.marker.data,r.tag=j.marker.tag,
j.marker.opciones?(m={},g.extend(!0,m,l,j.marker.opciones),r.opciones=m):r.opciones=l,j=this._addMarker(r,r.latLng,!0),this._attachEvents(j,r),a.store(n,j);r.opciones=l}}};this.addinfowindow=function(b){this._resolveLatLng(b,"_addInfoWindow")};this._addInfoWindow=function(b,a){var c,e,g=[];this._subcall(b,a);c=s("infowindow",b,["open","anchor"]);a&&(c.opciones.position=a);e=new l.classes.InfoWindow(c.opciones);if(void 0===c.open||c.open)c.apply=t(c.apply),g.push(f),c.anchor&&g.push(c.anchor),c.apply.unshift({action:"open",
args:g});d.add("infowindow",e,c);this._manageEnd(e,c)};this.addpolyline=function(b){this._addPoly(b,"Polyline","path")};this.addpolygon=function(b){this._addPoly(b,"Polygon","paths")};this._addPoly=function(b,a,c){var e,g,b=s(a.toLowerCase(),b,c);if(b[c]){b.opciones[c]=[];for(e=0;e<b[c].length;e++)(g=p(b[c][e]))&&b.opciones[c].push(g)}c=new google.maps[a](b.opciones);c.setMap(f);d.add(a.toLowerCase(),c,b);this._manageEnd(c,b)};this.addcircle=function(b){this._resolveLatLng(b,"_addCircle")};this._addCircle=
function(b,a){var c,e=s("circle",b);a||(a=p(e.opciones.center));if(!a)return this._manageEnd(!1,e);this._subcall(b,a);e.opciones.center=a;e.opciones.map=f;c=new l.classes.Circle(e.opciones);d.add("circle",c,e);this._manageEnd(c,e)};this.addrectangle=function(b){this._resolveLatLng(b,"_addRectangle")};this._addRectangle=function(b){var a=s("rectangle",b);a.opciones.bounds=I(a.opciones.bounds,!0);if(!a.opciones.bounds)return this._manageEnd(!1,a);this._subcall(b,a.opciones.bounds.getCenter());a.opciones.map=
f;b=new l.classes.Rectangle(a.opciones);d.add("rectangle",b,a);this._manageEnd(b,a)};this.addoverlay=function(b){this._resolveLatLng(b,"_addOverlay")};this._addOverlay=function(b,a,c){function e(){l.classes.OverlayView.call(this);this.setMap(f)}var h=s("overlay",b),n=g.extend({pane:"floatPane",content:"",offset:{x:0,y:0}},h.opciones),i=g("<div></div>"),j=[];i.css("border","none").css("borderWidth","0px").css("position","absolute");i.append(n.content);e.prototype=new l.classes.OverlayView;e.prototype.onAdd=
function(){var b=this.getPanes();n.pane in b&&g(b[n.pane]).append(i)};e.prototype.draw=function(){var b=this.getProjection().fromLatLngToDivPixel(a),c=this;i.css("left",b.x+n.offset.x+"px").css("top",b.y+n.offset.y+"px");g.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(b,a){j.push(google.maps.event.addDomListener(i[0],a,function(){google.maps.event.trigger(c,a)}))});j.push(google.maps.event.addDomListener(i[0],"contextmenu",function(){google.maps.event.trigger(c,
"rightclick")}))};e.prototype.onRemove=function(){for(var b=0;b<j.length;b++)google.maps.event.removeListener(j[b]);i.remove()};e.prototype.hide=function(){i.hide()};e.prototype.show=function(){i.show()};e.prototype.toggle=function(){i&&(i.is(":visible")?this.show():this.hide())};e.prototype.toggleDOM=function(){this.getMap()?this.setMap(null):this.setMap(f)};e.prototype.getDOMElement=function(){return i[0]};b=new e;c||(d.add("overlay",b,h),this._manageEnd(b,h));return b};this.addfixpanel=function(b){var b=
s("fixpanel",b),c=y=0,e;b.opciones.content&&(e=g(b.opciones.content),void 0!==b.opciones.left?c=b.opciones.left:void 0!==b.opciones.right?c=a.width()-e.width()-b.opciones.right:b.opciones.center&&(c=(a.width()-e.width())/2),void 0!==b.opciones.top?y=b.opciones.top:void 0!==b.opciones.bottom?y=a.height()-e.height()-b.opciones.bottom:b.opciones.middle&&(y=(a.height()-e.height())/2),c=g("<div></div>").css("position","absolute").css("top",y+"px").css("left",c+"px").css("z-index","1000").append(e),a.first().prepend(c),
this._attachEvents(f,b),d.add("fixpanel",c,b),this._callback(c,b));this._end()};this.adddirectionsrenderer=function(b,a){var c,e=s("directionrenderer",b,"panelId");e.opciones.map=f;c=new google.maps.DirectionsRenderer(e.opciones);e.panelId&&c.setPanel(document.getElementById(e.panelId));d.add("directionrenderer",c,e);this._manageEnd(c,e,a);return c};this.setdirectionspanel=function(b){var a=d.get("directionrenderer"),b=s("directionpanel",b,"id");a&&b.id&&a.setPanel(document.getElementById(b.id));
this._manageEnd(a,b)};this.setdirections=function(b){var a=d.get("directionrenderer"),c=s("directions",b);b&&(c.opciones.directions=b.directions?b.directions:b.opciones&&b.opciones.directions?b.opciones.directions:null);c.opciones.directions&&(a?a.setDirections(c.opciones.directions):a=this.adddirectionsrenderer(c,!0));this._manageEnd(a,c)};this.setstreetview=function(b){var a=s("streetview",b,"id");a.opciones.position&&(a.opciones.position=p(a.opciones.position));(b=new l.classes.StreetViewPanorama(document.getElementById(a.id),
a.opciones))&&f.setStreetView(b);this._manageEnd(b,a)};this.addkmllayer=function(b){var a,b=s("kmllayer",b,"url");b.opciones.map=f;"string"===typeof b.url&&(a=new l.classes.KmlLayer(b.url,b.opciones));d.add("kmllayer",a,b);this._manageEnd(a,b)};this.addtrafficlayer=function(b){var b=s("trafficlayer",b),a=d.get("trafficlayer");a||(a=new l.classes.TrafficLayer,a.setMap(f),d.add("trafficlayer",a,b));this._manageEnd(a,b)};this.addbicyclinglayer=function(b){var b=s("bicyclinglayer",b),a=d.get("bicyclinglayer");
a||(a=new l.classes.BicyclingLayer,a.setMap(f),d.add("bicyclinglayer",a,b));this._manageEnd(a,b)};this.addgroundoverlay=function(b){var a,b=s("groundoverlay",b,["bounds","url"]);b.bounds=I(b.bounds);b.bounds&&"string"===typeof b.url&&(a=new l.classes.GroundOverlay(b.url,b.bounds),a.setMap(f),d.add("groundoverlay",a,b));this._manageEnd(a,b)};this.geolatlng=function(b){var c=h(b,"callback");"function"===typeof c&&(navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){b=new google.maps.LatLng(b.coords.latitude,
b.coords.longitude);c.apply(a,[b])},function(){c.apply(a,[!1])}):google.gears?google.gears.factory.create("beta.geolocation").getCurrentPosition(function(b){b=new google.maps.LatLng(b.latitude,b.longitude);c.apply(a,[b])},function(){out=!1;c.apply(a,[out])}):c.apply(a,[!1]));this._end()};this.addstyledmap=function(b,a){var c=s("styledmap",b,["id","style"]);c.style&&(c.id&&!e[c.id])&&(e[c.id]=new l.classes.StyledMapType(c.style,c.opciones),f&&f.mapTypes.set(c.id,e[c.id]));this._manageEnd(e[c.id],c,
a)};this.setstyledmap=function(b){var a=s("styledmap",b,["id","style"]);a.id&&(this.addstyledmap(a,!0),e[a.id]&&(f.setMapTypeId(a.id),this._callback(e[a.id],b)));this._manageEnd(e[a.id],a)};this.clear=function(b){var a=t(h(b,"list")||h(b,"name")),c=h(b,"last",!1),e=h(b,"first",!1),b=h(b,"tag");void 0!==b&&(b=t(b));d.clear(a,c,e,b);this._end()};this.get=function(b){var a=h(b,"name")||"map",c=h(b,"first"),e=h(b,"all"),b=h(b,"tag"),a=a.toLowerCase();if("map"===a)return f;void 0!==b&&(b=t(b));return c?
d.get(a,!1,b):e?d.all(a,b):d.get(a,!0,b)};this.getmaxzoom=function(a){this._resolveLatLng(a,"_getMaxZoom")};this._getMaxZoom=function(b,c){var d=h(b,"callback"),e=this;d&&"function"===typeof d?(maxZoomService||(maxZoomService=new google.maps.MaxZoomService),maxZoomService.getMaxZoomAtLatLng(c,function(b){d.apply(a,[b.status===google.maps.MaxZoomStatus.OK?b.zoom:!1,b.status]);e._end()})):this._end()};this.setdefault=function(a){E(a);this._end()};this.autofit=function(a,c){var e,g,n,l,i,j=!0,m=new google.maps.LatLngBounds,
p=h(a,"maxZoom",null);e=d.names();for(l=0;l<e.length;l++){g=d.all(e[l]);for(i=0;i<g.length;i++)n=g[i],n.getPosition?(m.extend(n.getPosition()),j=!1):n.getBounds?(m.extend(n.getBounds().getNorthEast()),m.extend(n.getBounds().getSouthWest()),j=!1):n.getPaths?n.getPaths().forEach(function(a){a.forEach(function(a){m.extend(a);j=!1})}):n.getPath?n.getPath().forEach(function(a){m.extend(a);j=!1}):n.getCenter&&(m.extend(n.getCenter()),j=!1)}if(!j&&(!f.getBounds()||!f.getBounds().equals(m)))null!==p&&google.maps.event.addListenerOnce(f,
"bounds_changed",function(){this.getZoom()>p&&this.setZoom(p)}),f.fitBounds(m);c||this._manageEnd(j?!1:m,a,c)}}var l={},v="events onces opciones apply callback data tag".split(" "),J="init geolatlng getlatlng getroute getelevation getdistance addstyledmap setdefault destroy".split(" "),K=["get"],B=directionsService=elevationService=maxZoomService=distanceMatrixService=null;g.fn.argenmap=function(){var a,c,d=[],f=!0,e=[];g.isEmptyObject(l)&&(l={verbose:!0,queryLimit:{attempt:5,delay:250,random:250},
unit:"km",init:{mapTypeId:"IGN",center:[-34,-59],zoom:5},classes:{Map:google.maps.Map,Marker:google.maps.Marker,InfoWindow:google.maps.InfoWindow,Circle:google.maps.Circle,Rectangle:google.maps.Rectangle,OverlayView:google.maps.OverlayView,StreetViewPanorama:google.maps.StreetViewPanorama,KmlLayer:google.maps.KmlLayer,TrafficLayer:google.maps.TrafficLayer,BicyclingLayer:google.maps.BicyclingLayer,GroundOverlay:google.maps.GroundOverlay,StyledMapType:google.maps.StyledMapType}});for(a=0;a<arguments.length;a++)c=
arguments[a]||{},"string"===typeof c&&(c={accion:c}),d.push(c);d.length||d.push({});g.each(this,function(){var a=g(this),b=a.data("argenmap");f=!1;b||(b=new O(a),a.data("argenmap",b));if(a=1==d.length)a:{for(var a=h(d[0],"accion"),c=0;c<K.length;c++)if(K[c]===a){a=!0;break a}a=!1}a?e.push(b._direct(d[0])):b._plan(d)});if(e.length)return 1===e.length?e[0]:e;f&&(2==arguments.length&&"string"===typeof arguments[0]&&"setdefault"===arguments[0].toLowerCase())&&E(arguments[1]);return this};g.fn.agregarCapaBaseWMS=
function(a){return this.each(function(){var c=g(this);c.data("argenmap")&&(c=c.data("gmap"),m.GmapAgregarCapaBase(c,new m.CapaBaseWMS({name:a.nombre,baseURL:a.url,layers:a.capas})))})};g.fn.agregarCapaWMS=function(a){return this.each(function(){var c=g(this);c.data("argenmap")&&(c=c.data("gmap"),m.GmapAgregarCapaWms(c,new m.CapaWMS({name:a.nombre,baseURL:a.url,layers:a.capas})))})};g.fn.agregarCapaKML=function(a){return this.each(function(){var c=g(this);c.data("argenmap")&&c.argenmap({accion:"agregarCapaKml",
opciones:{preserveViewport:!0},url:a.url})})};g.fn.centro=function(a,c){if(0===arguments.length){if(!this.data("argenmap"))return[];var d=this.data("gmap").getCenter();return d?[d.lat(),d.lng()]:[]}return this.each(function(){var d=g(this);d.data("argenmap")&&d.data("gmap").setCenter(new google.maps.LatLng(a,c))})};g.fn.zoom=function(a){if(void 0==a){if(!this.data("argenmap"))return null;var c=this.data("gmap").getZoom();return c?c:null}return this.each(function(){var c=g(this);c.data("argenmap")&&
g.isNumeric(a)&&c.data("gmap").setZoom(a)})};g.fn.capaBase=function(a){if(void 0==a){if(!this.data("argenmap"))return null;var c=this.data("gmap").mapTypeId;return c?c:null}return this.each(function(){var c=g(this);c.data("argenmap")&&c.data("gmap").setMapTypeId(a)})};g.fn.agregarMarcador=function(a,c){var d=arguments;return this.each(function(){var c=g.extend({},a),e=g(this);e.data("argenmap")&&(0==d.length&&(c.lat=e.data("gmap").getCenter().lat(),c.lng=e.data("gmap").getCenter().lng()),e.argenmap({accion:"agregarMarcador",
latLng:[c.lat,c.lng],data:c.contenido,events:{click:function(a,b,d){if(void 0!=c.contenido){var b=e.data("gmap"),h=e.argenmap({accion:"get",name:"infowindow"});h?(h.open(b,a),h.setContent(d)):g(this).argenmap({accion:"addinfowindow",anchor:a,opciones:{content:d}})}}}}))})};g.fn.agregarMarcadores=function(a){return this.each(function(){var c=g(this);c.data("argenmap")&&g.each(a,function(a,f){c.agregarMarcador(f)})})};g.fn.limpiarMapa=function(){return this.each(function(){var a=g(this);a.data("argenmap")&&
a.argenmap({accion:"limpiar"})})};var m=m||{};m.BASEURL="http://www.ign.gob.ar/argenmap/argenmap.jquery/";m.CapaBaseWMS=function(a){this.gmap=this.imageMapType=null;this.name="Capa base WMS";this.tipo="wms-1.3";jQuery.extend(this,a);a={alt:this.name,getTileUrl:jQuery.proxy(this.getTileUrl,this),isPng:!0,maxZoom:17,minZoom:3,name:this.name,tileSize:new google.maps.Size(256,256)};this.imageMapType=new google.maps.ImageMapType(a)};m.CapaBaseWMS.prototype.getTileUrl=function(a,c){var d=this.gmap.getProjection(),
f=Math.pow(2,c),e=new google.maps.Point(256*a.x/f,256*(a.y+1)/f),f=new google.maps.Point(256*(a.x+1)/f,256*a.y/f),e=d.fromPointToLatLng(e),d=d.fromPointToLatLng(f),f=this.baseURL,g=this.layers,e=m.latLngAMercator(e.lat(),e.lng()),d=m.latLngAMercator(d.lat(),d.lng());return f+"Layers="+g+"&version=1.3.0&EXCEPTIONS=INIMAGE&Service=WMS&request=GetMap&Styles=&format=image%2Fpng8&SRS=EPSG:3857&CRS=EPSG:3857&BBOX="+(e.lng+","+e.lat+","+d.lng+","+d.lat)+"&width=256&height=256"};m.CapaBaseIGN=function(a){a=
{name:"IGN",baseURL:"http://www.ign.gob.ar/wms/?",layers:"capabasesigign"};m.CapaBaseWMS.apply(this,[a])};m.CapaBaseIGN.prototype.getTileUrl=function(){return m.CapaBaseWMS.prototype.getTileUrl.apply(this,arguments)};m.CapaWMS=function(a){this.gmap=this.imageMapType=null;this.tipo="wms-1.3";this.alt=this.name="CAPA WMS";jQuery.extend(this,a);a={alt:this.alt,getTileUrl:jQuery.proxy(this.getTileUrl,this),isPng:!1,maxZoom:17,minZoom:6,name:this.name,tileSize:new google.maps.Size(256,256)};this.imageMapType=
new google.maps.ImageMapType(a)};m.CapaWMS.prototype.getTileUrl=function(a,c){var d=this.gmap.getProjection(),f=Math.pow(2,c),e=new google.maps.Point(256*a.x/f,256*(a.y+1)/f),f=new google.maps.Point(256*(a.x+1)/f,256*a.y/f),e=d.fromPointToLatLng(e),d=d.fromPointToLatLng(f),f=this.baseURL,g=this.layers,e=m.latLngAMercator(e.lat(),e.lng()),d=m.latLngAMercator(d.lat(),d.lng());return f+"version=1.3.0&request=GetMap&Layers="+g+"&Styles=&SRS=EPSG:3857&BBOX="+(e.lng+","+e.lat+","+d.lng+","+d.lat)+"&width=256&height=256&format=image/png&TRANSPARENT=TRUE"};
m.CapaWMSIGN=function(){m.CapaWMS.apply(this,[{name:"IGN",baseURL:"http://www.ign.gob.ar/wms/?",layers:"capabasesigign"}])};m.CapaWMSIGN.prototype.getTileUrl=function(a,c){return"satellite"!=this.gmap.getMapTypeId()?!1:m.CapaWMS.prototype.getTileUrl.apply(this,arguments)};m.GmapAgregarCapaBase=function(a,c){var d;c.gmap=a;a.mapTypes.set(c.imageMapType.name,c.imageMapType);a.mapTypeControlOptions?(d=a.mapTypeControlOptions.mapTypeIds)?d.splice(0,0,c.imageMapType.name):d=[c.imageMapType.name,"satellite"]:
d=[c.imageMapType.name,"satellite"];a.setOptions({mapTypeControlOptions:{mapTypeIds:d,style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}})};m.GmapAgregarCapaWms=function(a,c){c.gmap=a;a.overlayMapTypes.push(c.imageMapType)};m._prepararContenedor=function(a){var c=m.BASEURL+"img/ign-logo-255x45.png",d=g('<div class="argenmapMapCanvas" />').css({width:"100%","min-height":"200px"}),f=g('<div class="argenmapMapHeader" />').css({"background-color":"#00364F",height:"50px",color:"white",padding:"0px",
"text-align":"left"}),e=g('<div class="argenmapMapFooter" />').css({"font-family":"Arial",color:"#444","background-color":"#00364F","font-size":"10px","text-align":"right",height:"20px",color:"white",padding:"2px 5px"}),h=g("<img />"),b=g('<a target="_blank" href="http://www.ign.gob.ar/argenmap/argenmap.jquery/docs"></a>').append(h);h.attr("src",c).css({border:"0"});f.append(b);a.append(f);a.append(d);a.append(e);e.html('<a style="color:white;text-decoration:underline;font-weight:normal" target="_blank" href="http://www.ign.gob.ar/argenmap/argenmap.jquery/docs/datosvectoriales.html">Top&oacute;nimos, datos topogr&aacute;ficos - 2012 IGN Argentina. Calles OSM</a>');
m._maximizarCanvas(a,f,e,d);return d.get(0)};m._maximizarCanvas=function(a,c,d,f){var e=a.height()-c.height()-d.height();f.height(e);a.bind("resized",function(){var e=a.height()-c.height()-d.height();f.height(e);google.maps.event.trigger(a.argenmap("get"),"resize")})};m.latLngAMercator=function(a,c){var d=2.003750834E7*c/180,f=Math.log(Math.tan((90+a)*Math.PI/360))/(Math.PI/180);return{lat:2.003750834E7*f/180,lng:d}};g.event.special.resized={setup:function(){var a=this,c=g(this),d=c.width(),f=c.height();
interval=setInterval(function(){if(d!=c.width()||f!=c.height())d=c.width(),f=c.height(),jQuery.event.handle.call(a,{type:"resized"})},100)},teardown:function(){clearInterval(interval)}}})(jQuery);